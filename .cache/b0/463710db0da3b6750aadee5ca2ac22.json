{"id":"../src/index.js","dependencies":[{"name":"/Users/lokalone/code/dasouche/frigg/.babelrc","includedInParent":true,"mtime":1546507748000},{"name":"/Users/lokalone/code/dasouche/frigg/package.json","includedInParent":true,"mtime":1548052930000},{"name":"@babel/runtime/helpers/classCallCheck","parent":"/Users/lokalone/code/dasouche/frigg/src/index.js","resolved":"/Users/lokalone/code/dasouche/frigg/node_modules/@babel/runtime/helpers/classCallCheck.js"},{"name":"@babel/runtime/helpers/createClass","parent":"/Users/lokalone/code/dasouche/frigg/src/index.js","resolved":"/Users/lokalone/code/dasouche/frigg/node_modules/@babel/runtime/helpers/createClass.js"},{"name":"./tool.js","loc":{"line":1,"column":38},"parent":"/Users/lokalone/code/dasouche/frigg/src/index.js","resolved":"/Users/lokalone/code/dasouche/frigg/src/tool.js"},{"name":"./item.js","loc":{"line":2,"column":51},"parent":"/Users/lokalone/code/dasouche/frigg/src/index.js","resolved":"/Users/lokalone/code/dasouche/frigg/src/item.js"},{"name":"./queue.js","loc":{"line":3,"column":18},"parent":"/Users/lokalone/code/dasouche/frigg/src/index.js","resolved":"/Users/lokalone/code/dasouche/frigg/src/queue.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _tool = require(\"./tool.js\");\n\nvar _item = require(\"./item.js\");\n\nvar _queue = _interopRequireDefault(require(\"./queue.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//为了保证图片绘制的顺序，使用绘制队列\nvar Frigg =\n/*#__PURE__*/\nfunction () {\n  function Frigg(data) {\n    (0, _classCallCheck2.default)(this, Frigg);\n    this.ratio = data.width / data.height;\n    this.bgJson = data.background;\n\n    var _this$createCanvas = this.createCanvas(data.width, data.height),\n        ctx = _this$createCanvas.ctx,\n        canvas = _this$createCanvas.canvas;\n\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.itemsJson = data.items;\n    this.image = '';\n  }\n\n  (0, _createClass2.default)(Frigg, [{\n    key: \"draw\",\n    value: function draw(ctx) {\n      this.drawBackground(ctx, this.bgJson);\n      this.drawItems(ctx, this.itemsJson);\n    }\n  }, {\n    key: \"createCanvas\",\n    value: function createCanvas(width, height) {\n      var canvas = document.createElement('canvas');\n      canvas.crossorigin = 'anonymous'; // document.body.append(canvas)\n\n      canvas.width = width;\n      canvas.height = height;\n      var ctx = canvas.getContext('2d');\n      return {\n        canvas: canvas,\n        ctx: ctx\n      };\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        _this.draw(_this.ctx);\n\n        _queue.default.push(function () {\n          var image = _this.canvas.toDataURL();\n\n          if (!image) {\n            reject('无法生成image');\n          }\n\n          resolve(image); // downloadFile(image, 'template.jpg')\n        });\n\n        _queue.default.next();\n      });\n    }\n  }, {\n    key: \"drawBackground\",\n    value: function drawBackground(ctx, bgJson) {\n      if (bgJson.type === 'color') {\n        ctx.fillStyle = bgJson.value;\n        ctx.fillRect(0, 0, bgJson.width, bgJson.height);\n      } else {\n        var bg = new _item.ImageItem(ctx, bgJson);\n        bg.add();\n      }\n    }\n  }, {\n    key: \"drawItems\",\n    value: function drawItems(ctx, itemsData) {\n      var _this2 = this;\n\n      if (itemsData.length <= 0 && !(0, _tool.isArray)(items)) return;\n      var TYPES = [_item.ImageItem, _item.TextItem, _item.TextGroupItem];\n      itemsData.forEach(function (element) {\n        TYPES.some(function (i) {\n          if (_this2.isItem(i, element.type)) {\n            var tmpItem = new i(ctx, element);\n            tmpItem.add();\n            return true;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"isItem\",\n    value: function isItem(i, type) {\n      return i.name.toLowerCase().includes(type);\n    }\n  }, {\n    key: \"getThumbnail\",\n    value: function getThumbnail(width) {\n      var _this3 = this;\n\n      var height = width / this.ratio;\n\n      var _this$createCanvas2 = this.createCanvas(width, height),\n          ctx = _this$createCanvas2.ctx,\n          canvas = _this$createCanvas2.canvas;\n\n      return new Promise(function (resolve) {\n        setInterval(function () {\n          if (!_this3.image) {\n            ctx.drawImage(_this3.canvas, 0, 0, width, height);\n            var image = canvas.toDataURL();\n            resolve(image);\n          }\n        }, 10);\n      });\n    }\n  }]);\n  return Frigg;\n}();\n\nvar _default = Frigg;\nexports.default = _default;","map":{"mappings":[{"generated":{"line":12,"column":0},"source":"../src/index.js","original":{"line":1,"column":0}},{"generated":{"line":14,"column":0},"source":"../src/index.js","original":{"line":2,"column":0}},{"generated":{"line":16,"column":0},"source":"../src/index.js","original":{"line":3,"column":0}},{"generated":{"line":20,"column":0},"source":"../src/index.js","original":{"line":5,"column":0}},{"name":"Frigg","generated":{"line":21,"column":4},"source":"../src/index.js","original":{"line":7,"column":6}},{"generated":{"line":24,"column":0},"source":"../src/index.js","original":{"line":9,"column":4}},{"name":"data","generated":{"line":24,"column":17},"source":"../src/index.js","original":{"line":9,"column":16}},{"generated":{"line":24,"column":21},"source":"../src/index.js","original":{"line":9,"column":4}},{"generated":{"line":24,"column":23},"source":"../src/index.js","original":{"line":9,"column":22}},{"generated":{"line":25,"column":0},"source":"../src/index.js","original":{"line":9,"column":22}},{"generated":{"line":26,"column":0},"source":"../src/index.js","original":{"line":10,"column":8}},{"name":"ratio","generated":{"line":26,"column":9},"source":"../src/index.js","original":{"line":10,"column":13}},{"generated":{"line":26,"column":14},"source":"../src/index.js","original":{"line":10,"column":8}},{"name":"data","generated":{"line":26,"column":17},"source":"../src/index.js","original":{"line":10,"column":21}},{"generated":{"line":26,"column":21},"source":"../src/index.js","original":{"line":10,"column":25}},{"name":"width","generated":{"line":26,"column":22},"source":"../src/index.js","original":{"line":10,"column":26}},{"generated":{"line":26,"column":27},"source":"../src/index.js","original":{"line":10,"column":21}},{"name":"data","generated":{"line":26,"column":30},"source":"../src/index.js","original":{"line":10,"column":34}},{"generated":{"line":26,"column":34},"source":"../src/index.js","original":{"line":10,"column":38}},{"name":"height","generated":{"line":26,"column":35},"source":"../src/index.js","original":{"line":10,"column":39}},{"generated":{"line":26,"column":41},"source":"../src/index.js","original":{"line":10,"column":8}},{"generated":{"line":27,"column":0},"source":"../src/index.js","original":{"line":11,"column":8}},{"name":"bgJson","generated":{"line":27,"column":9},"source":"../src/index.js","original":{"line":11,"column":13}},{"generated":{"line":27,"column":15},"source":"../src/index.js","original":{"line":11,"column":8}},{"name":"data","generated":{"line":27,"column":18},"source":"../src/index.js","original":{"line":11,"column":22}},{"generated":{"line":27,"column":22},"source":"../src/index.js","original":{"line":11,"column":26}},{"name":"background","generated":{"line":27,"column":23},"source":"../src/index.js","original":{"line":11,"column":27}},{"generated":{"line":27,"column":33},"source":"../src/index.js","original":{"line":11,"column":8}},{"generated":{"line":29,"column":0},"source":"../src/index.js","original":{"line":9,"column":22}},{"generated":{"line":29,"column":29},"source":"../src/index.js","original":{"line":12,"column":30}},{"name":"createCanvas","generated":{"line":29,"column":34},"source":"../src/index.js","original":{"line":12,"column":35}},{"generated":{"line":29,"column":46},"source":"../src/index.js","original":{"line":12,"column":30}},{"name":"data","generated":{"line":29,"column":47},"source":"../src/index.js","original":{"line":12,"column":48}},{"generated":{"line":29,"column":51},"source":"../src/index.js","original":{"line":12,"column":52}},{"name":"width","generated":{"line":29,"column":52},"source":"../src/index.js","original":{"line":12,"column":53}},{"generated":{"line":29,"column":57},"source":"../src/index.js","original":{"line":12,"column":30}},{"name":"data","generated":{"line":29,"column":59},"source":"../src/index.js","original":{"line":12,"column":60}},{"generated":{"line":29,"column":63},"source":"../src/index.js","original":{"line":12,"column":64}},{"name":"height","generated":{"line":29,"column":64},"source":"../src/index.js","original":{"line":12,"column":65}},{"generated":{"line":29,"column":70},"source":"../src/index.js","original":{"line":12,"column":30}},{"generated":{"line":29,"column":71},"source":"../src/index.js","original":{"line":9,"column":22}},{"generated":{"line":30,"column":0},"source":"../src/index.js","original":{"line":9,"column":22}},{"name":"ctx","generated":{"line":30,"column":8},"source":"../src/index.js","original":{"line":12,"column":15}},{"generated":{"line":30,"column":11},"source":"../src/index.js","original":{"line":9,"column":22}},{"name":"ctx","generated":{"line":30,"column":33},"source":"../src/index.js","original":{"line":12,"column":15}},{"generated":{"line":30,"column":36},"source":"../src/index.js","original":{"line":9,"column":22}},{"generated":{"line":31,"column":0},"source":"../src/index.js","original":{"line":9,"column":22}},{"name":"canvas","generated":{"line":31,"column":8},"source":"../src/index.js","original":{"line":12,"column":20}},{"generated":{"line":31,"column":14},"source":"../src/index.js","original":{"line":9,"column":22}},{"name":"canvas","generated":{"line":31,"column":36},"source":"../src/index.js","original":{"line":12,"column":20}},{"generated":{"line":31,"column":42},"source":"../src/index.js","original":{"line":9,"column":22}},{"generated":{"line":33,"column":0},"source":"../src/index.js","original":{"line":13,"column":8}},{"name":"canvas","generated":{"line":33,"column":9},"source":"../src/index.js","original":{"line":13,"column":13}},{"generated":{"line":33,"column":15},"source":"../src/index.js","original":{"line":13,"column":8}},{"name":"canvas","generated":{"line":33,"column":18},"source":"../src/index.js","original":{"line":13,"column":22}},{"generated":{"line":33,"column":24},"source":"../src/index.js","original":{"line":13,"column":8}},{"generated":{"line":34,"column":0},"source":"../src/index.js","original":{"line":14,"column":8}},{"name":"ctx","generated":{"line":34,"column":9},"source":"../src/index.js","original":{"line":14,"column":13}},{"generated":{"line":34,"column":12},"source":"../src/index.js","original":{"line":14,"column":8}},{"name":"ctx","generated":{"line":34,"column":15},"source":"../src/index.js","original":{"line":14,"column":19}},{"generated":{"line":34,"column":18},"source":"../src/index.js","original":{"line":14,"column":8}},{"generated":{"line":35,"column":0},"source":"../src/index.js","original":{"line":15,"column":8}},{"name":"itemsJson","generated":{"line":35,"column":9},"source":"../src/index.js","original":{"line":15,"column":13}},{"generated":{"line":35,"column":18},"source":"../src/index.js","original":{"line":15,"column":8}},{"name":"data","generated":{"line":35,"column":21},"source":"../src/index.js","original":{"line":15,"column":25}},{"generated":{"line":35,"column":25},"source":"../src/index.js","original":{"line":15,"column":29}},{"name":"items","generated":{"line":35,"column":26},"source":"../src/index.js","original":{"line":15,"column":30}},{"generated":{"line":35,"column":31},"source":"../src/index.js","original":{"line":15,"column":8}},{"generated":{"line":36,"column":0},"source":"../src/index.js","original":{"line":16,"column":8}},{"name":"image","generated":{"line":36,"column":9},"source":"../src/index.js","original":{"line":16,"column":13}},{"generated":{"line":36,"column":14},"source":"../src/index.js","original":{"line":16,"column":8}},{"generated":{"line":36,"column":17},"source":"../src/index.js","original":{"line":16,"column":21}},{"generated":{"line":36,"column":19},"source":"../src/index.js","original":{"line":16,"column":8}},{"generated":{"line":37,"column":0},"source":"../src/index.js","original":{"line":17,"column":5}},{"name":"ctx","generated":{"line":41,"column":25},"source":"../src/index.js","original":{"line":19,"column":9}},{"generated":{"line":41,"column":30},"source":"../src/index.js","original":{"line":19,"column":14}},{"generated":{"line":42,"column":0},"source":"../src/index.js","original":{"line":20,"column":8}},{"name":"drawBackground","generated":{"line":42,"column":11},"source":"../src/index.js","original":{"line":20,"column":13}},{"generated":{"line":42,"column":25},"source":"../src/index.js","original":{"line":20,"column":8}},{"name":"ctx","generated":{"line":42,"column":26},"source":"../src/index.js","original":{"line":20,"column":28}},{"generated":{"line":42,"column":29},"source":"../src/index.js","original":{"line":20,"column":8}},{"generated":{"line":42,"column":31},"source":"../src/index.js","original":{"line":20,"column":33}},{"name":"bgJson","generated":{"line":42,"column":36},"source":"../src/index.js","original":{"line":20,"column":38}},{"generated":{"line":42,"column":42},"source":"../src/index.js","original":{"line":20,"column":8}},{"generated":{"line":43,"column":0},"source":"../src/index.js","original":{"line":21,"column":8}},{"name":"drawItems","generated":{"line":43,"column":11},"source":"../src/index.js","original":{"line":21,"column":13}},{"generated":{"line":43,"column":20},"source":"../src/index.js","original":{"line":21,"column":8}},{"name":"ctx","generated":{"line":43,"column":21},"source":"../src/index.js","original":{"line":21,"column":23}},{"generated":{"line":43,"column":24},"source":"../src/index.js","original":{"line":21,"column":8}},{"generated":{"line":43,"column":26},"source":"../src/index.js","original":{"line":21,"column":28}},{"name":"itemsJson","generated":{"line":43,"column":31},"source":"../src/index.js","original":{"line":21,"column":33}},{"generated":{"line":43,"column":40},"source":"../src/index.js","original":{"line":21,"column":8}},{"generated":{"line":44,"column":0},"source":"../src/index.js","original":{"line":23,"column":5}},{"name":"width","generated":{"line":47,"column":33},"source":"../src/index.js","original":{"line":25,"column":17}},{"name":"height","generated":{"line":47,"column":40},"source":"../src/index.js","original":{"line":25,"column":24}},{"generated":{"line":47,"column":48},"source":"../src/index.js","original":{"line":25,"column":32}},{"generated":{"line":48,"column":0},"source":"../src/index.js","original":{"line":26,"column":8}},{"name":"canvas","generated":{"line":48,"column":10},"source":"../src/index.js","original":{"line":26,"column":14}},{"generated":{"line":48,"column":16},"source":"../src/index.js","original":{"line":26,"column":20}},{"name":"document","generated":{"line":48,"column":19},"source":"../src/index.js","original":{"line":26,"column":23}},{"generated":{"line":48,"column":27},"source":"../src/index.js","original":{"line":26,"column":31}},{"name":"createElement","generated":{"line":48,"column":28},"source":"../src/index.js","original":{"line":26,"column":32}},{"generated":{"line":48,"column":41},"source":"../src/index.js","original":{"line":26,"column":23}},{"generated":{"line":48,"column":42},"source":"../src/index.js","original":{"line":26,"column":46}},{"generated":{"line":48,"column":50},"source":"../src/index.js","original":{"line":26,"column":23}},{"generated":{"line":48,"column":51},"source":"../src/index.js","original":{"line":26,"column":8}},{"name":"canvas","generated":{"line":49,"column":0},"source":"../src/index.js","original":{"line":27,"column":8}},{"name":"canvas","generated":{"line":49,"column":6},"source":"../src/index.js","original":{"line":27,"column":8}},{"generated":{"line":49,"column":12},"source":"../src/index.js","original":{"line":27,"column":14}},{"name":"crossorigin","generated":{"line":49,"column":13},"source":"../src/index.js","original":{"line":27,"column":15}},{"generated":{"line":49,"column":24},"source":"../src/index.js","original":{"line":27,"column":8}},{"generated":{"line":49,"column":27},"source":"../src/index.js","original":{"line":27,"column":29}},{"generated":{"line":49,"column":38},"source":"../src/index.js","original":{"line":27,"column":8}},{"generated":{"line":49,"column":39},"source":"../src/index.js","original":{"line":25,"column":32}},{"generated":{"line":49,"column":40},"source":"../src/index.js","original":{"line":28,"column":8}},{"name":"canvas","generated":{"line":51,"column":0},"source":"../src/index.js","original":{"line":29,"column":8}},{"name":"canvas","generated":{"line":51,"column":6},"source":"../src/index.js","original":{"line":29,"column":8}},{"generated":{"line":51,"column":12},"source":"../src/index.js","original":{"line":29,"column":14}},{"name":"width","generated":{"line":51,"column":13},"source":"../src/index.js","original":{"line":29,"column":15}},{"generated":{"line":51,"column":18},"source":"../src/index.js","original":{"line":29,"column":8}},{"name":"width","generated":{"line":51,"column":21},"source":"../src/index.js","original":{"line":29,"column":23}},{"generated":{"line":51,"column":26},"source":"../src/index.js","original":{"line":29,"column":8}},{"name":"canvas","generated":{"line":52,"column":0},"source":"../src/index.js","original":{"line":30,"column":8}},{"name":"canvas","generated":{"line":52,"column":6},"source":"../src/index.js","original":{"line":30,"column":8}},{"generated":{"line":52,"column":12},"source":"../src/index.js","original":{"line":30,"column":14}},{"name":"height","generated":{"line":52,"column":13},"source":"../src/index.js","original":{"line":30,"column":15}},{"generated":{"line":52,"column":19},"source":"../src/index.js","original":{"line":30,"column":8}},{"name":"height","generated":{"line":52,"column":22},"source":"../src/index.js","original":{"line":30,"column":24}},{"generated":{"line":52,"column":28},"source":"../src/index.js","original":{"line":30,"column":8}},{"generated":{"line":53,"column":0},"source":"../src/index.js","original":{"line":31,"column":8}},{"name":"ctx","generated":{"line":53,"column":10},"source":"../src/index.js","original":{"line":31,"column":14}},{"generated":{"line":53,"column":13},"source":"../src/index.js","original":{"line":31,"column":17}},{"name":"canvas","generated":{"line":53,"column":16},"source":"../src/index.js","original":{"line":31,"column":20}},{"generated":{"line":53,"column":22},"source":"../src/index.js","original":{"line":31,"column":26}},{"name":"getContext","generated":{"line":53,"column":23},"source":"../src/index.js","original":{"line":31,"column":27}},{"generated":{"line":53,"column":33},"source":"../src/index.js","original":{"line":31,"column":20}},{"generated":{"line":53,"column":34},"source":"../src/index.js","original":{"line":31,"column":38}},{"generated":{"line":53,"column":38},"source":"../src/index.js","original":{"line":31,"column":20}},{"generated":{"line":53,"column":39},"source":"../src/index.js","original":{"line":31,"column":8}},{"generated":{"line":54,"column":0},"source":"../src/index.js","original":{"line":32,"column":8}},{"generated":{"line":54,"column":13},"source":"../src/index.js","original":{"line":32,"column":15}},{"name":"canvas","generated":{"line":55,"column":0},"source":"../src/index.js","original":{"line":33,"column":12}},{"name":"canvas","generated":{"line":55,"column":8},"source":"../src/index.js","original":{"line":33,"column":12}},{"generated":{"line":55,"column":14},"source":"../src/index.js","original":{"line":33,"column":18}},{"name":"canvas","generated":{"line":55,"column":16},"source":"../src/index.js","original":{"line":33,"column":12}},{"generated":{"line":55,"column":22},"source":"../src/index.js","original":{"line":32,"column":15}},{"name":"ctx","generated":{"line":56,"column":0},"source":"../src/index.js","original":{"line":34,"column":12}},{"name":"ctx","generated":{"line":56,"column":8},"source":"../src/index.js","original":{"line":34,"column":12}},{"generated":{"line":56,"column":11},"source":"../src/index.js","original":{"line":34,"column":15}},{"name":"ctx","generated":{"line":56,"column":13},"source":"../src/index.js","original":{"line":34,"column":12}},{"generated":{"line":57,"column":0},"source":"../src/index.js","original":{"line":32,"column":15}},{"generated":{"line":57,"column":7},"source":"../src/index.js","original":{"line":32,"column":8}},{"generated":{"line":58,"column":0},"source":"../src/index.js","original":{"line":36,"column":5}},{"generated":{"line":61,"column":31},"source":"../src/index.js","original":{"line":39,"column":15}},{"generated":{"line":62,"column":0},"source":"../src/index.js","original":{"line":39,"column":15}},{"generated":{"line":64,"column":0},"source":"../src/index.js","original":{"line":40,"column":8}},{"generated":{"line":64,"column":13},"source":"../src/index.js","original":{"line":40,"column":15}},{"name":"Promise","generated":{"line":64,"column":17},"source":"../src/index.js","original":{"line":40,"column":19}},{"generated":{"line":64,"column":24},"source":"../src/index.js","original":{"line":40,"column":15}},{"generated":{"line":64,"column":25},"source":"../src/index.js","original":{"line":40,"column":28}},{"name":"resolve","generated":{"line":64,"column":35},"source":"../src/index.js","original":{"line":40,"column":29}},{"generated":{"line":64,"column":42},"source":"../src/index.js","original":{"line":40,"column":28}},{"name":"reject","generated":{"line":64,"column":44},"source":"../src/index.js","original":{"line":40,"column":38}},{"generated":{"line":64,"column":50},"source":"../src/index.js","original":{"line":40,"column":28}},{"generated":{"line":64,"column":52},"source":"../src/index.js","original":{"line":40,"column":49}},{"generated":{"line":65,"column":0},"source":"../src/index.js","original":{"line":41,"column":12}},{"generated":{"line":65,"column":8},"source":"../src/index.js","original":{"line":41,"column":12}},{"generated":{"line":65,"column":13},"source":"../src/index.js","original":{"line":41,"column":16}},{"name":"draw","generated":{"line":65,"column":14},"source":"../src/index.js","original":{"line":41,"column":17}},{"generated":{"line":65,"column":18},"source":"../src/index.js","original":{"line":41,"column":12}},{"generated":{"line":65,"column":19},"source":"../src/index.js","original":{"line":41,"column":22}},{"generated":{"line":65,"column":24},"source":"../src/index.js","original":{"line":41,"column":26}},{"name":"ctx","generated":{"line":65,"column":25},"source":"../src/index.js","original":{"line":41,"column":27}},{"generated":{"line":65,"column":28},"source":"../src/index.js","original":{"line":41,"column":12}},{"name":"Quene","generated":{"line":67,"column":0},"source":"../src/index.js","original":{"line":42,"column":12}},{"name":"push","generated":{"line":67,"column":23},"source":"../src/index.js","original":{"line":42,"column":18}},{"generated":{"line":67,"column":27},"source":"../src/index.js","original":{"line":42,"column":12}},{"generated":{"line":67,"column":28},"source":"../src/index.js","original":{"line":42,"column":23}},{"generated":{"line":67,"column":40},"source":"../src/index.js","original":{"line":42,"column":29}},{"generated":{"line":68,"column":0},"source":"../src/index.js","original":{"line":43,"column":16}},{"name":"image","generated":{"line":68,"column":14},"source":"../src/index.js","original":{"line":43,"column":20}},{"generated":{"line":68,"column":19},"source":"../src/index.js","original":{"line":43,"column":25}},{"generated":{"line":68,"column":22},"source":"../src/index.js","original":{"line":43,"column":28}},{"generated":{"line":68,"column":27},"source":"../src/index.js","original":{"line":43,"column":32}},{"name":"canvas","generated":{"line":68,"column":28},"source":"../src/index.js","original":{"line":43,"column":33}},{"generated":{"line":68,"column":34},"source":"../src/index.js","original":{"line":43,"column":28}},{"name":"toDataURL","generated":{"line":68,"column":35},"source":"../src/index.js","original":{"line":43,"column":40}},{"generated":{"line":68,"column":44},"source":"../src/index.js","original":{"line":43,"column":28}},{"generated":{"line":68,"column":46},"source":"../src/index.js","original":{"line":43,"column":16}},{"generated":{"line":70,"column":0},"source":"../src/index.js","original":{"line":44,"column":16}},{"generated":{"line":70,"column":14},"source":"../src/index.js","original":{"line":44,"column":20}},{"name":"image","generated":{"line":70,"column":15},"source":"../src/index.js","original":{"line":44,"column":21}},{"generated":{"line":70,"column":20},"source":"../src/index.js","original":{"line":44,"column":16}},{"generated":{"line":70,"column":22},"source":"../src/index.js","original":{"line":44,"column":28}},{"name":"reject","generated":{"line":71,"column":0},"source":"../src/index.js","original":{"line":45,"column":20}},{"name":"reject","generated":{"line":71,"column":12},"source":"../src/index.js","original":{"line":45,"column":20}},{"generated":{"line":71,"column":18},"source":"../src/index.js","original":{"line":45,"column":26}},{"generated":{"line":71,"column":19},"source":"../src/index.js","original":{"line":45,"column":27}},{"generated":{"line":71,"column":30},"source":"../src/index.js","original":{"line":45,"column":26}},{"generated":{"line":71,"column":31},"source":"../src/index.js","original":{"line":45,"column":20}},{"generated":{"line":72,"column":0},"source":"../src/index.js","original":{"line":46,"column":17}},{"name":"resolve","generated":{"line":74,"column":0},"source":"../src/index.js","original":{"line":47,"column":16}},{"name":"resolve","generated":{"line":74,"column":10},"source":"../src/index.js","original":{"line":47,"column":16}},{"generated":{"line":74,"column":17},"source":"../src/index.js","original":{"line":47,"column":23}},{"name":"image","generated":{"line":74,"column":18},"source":"../src/index.js","original":{"line":47,"column":24}},{"generated":{"line":74,"column":23},"source":"../src/index.js","original":{"line":47,"column":23}},{"generated":{"line":74,"column":24},"source":"../src/index.js","original":{"line":47,"column":16}},{"generated":{"line":74,"column":25},"source":"../src/index.js","original":{"line":42,"column":29}},{"generated":{"line":74,"column":26},"source":"../src/index.js","original":{"line":48,"column":12}},{"generated":{"line":75,"column":0},"source":"../src/index.js","original":{"line":49,"column":13}},{"generated":{"line":75,"column":9},"source":"../src/index.js","original":{"line":42,"column":12}},{"name":"Quene","generated":{"line":77,"column":0},"source":"../src/index.js","original":{"line":50,"column":12}},{"name":"next","generated":{"line":77,"column":23},"source":"../src/index.js","original":{"line":50,"column":18}},{"generated":{"line":77,"column":27},"source":"../src/index.js","original":{"line":50,"column":12}},{"generated":{"line":78,"column":0},"source":"../src/index.js","original":{"line":51,"column":9}},{"generated":{"line":78,"column":7},"source":"../src/index.js","original":{"line":40,"column":15}},{"generated":{"line":78,"column":8},"source":"../src/index.js","original":{"line":40,"column":8}},{"generated":{"line":79,"column":0},"source":"../src/index.js","original":{"line":52,"column":5}},{"name":"ctx","generated":{"line":82,"column":35},"source":"../src/index.js","original":{"line":54,"column":19}},{"name":"bgJson","generated":{"line":82,"column":40},"source":"../src/index.js","original":{"line":54,"column":24}},{"generated":{"line":82,"column":48},"source":"../src/index.js","original":{"line":54,"column":32}},{"generated":{"line":83,"column":0},"source":"../src/index.js","original":{"line":55,"column":8}},{"name":"bgJson","generated":{"line":83,"column":10},"source":"../src/index.js","original":{"line":55,"column":12}},{"generated":{"line":83,"column":16},"source":"../src/index.js","original":{"line":55,"column":18}},{"name":"type","generated":{"line":83,"column":17},"source":"../src/index.js","original":{"line":55,"column":19}},{"generated":{"line":83,"column":21},"source":"../src/index.js","original":{"line":55,"column":12}},{"generated":{"line":83,"column":26},"source":"../src/index.js","original":{"line":55,"column":28}},{"generated":{"line":83,"column":33},"source":"../src/index.js","original":{"line":55,"column":8}},{"generated":{"line":83,"column":35},"source":"../src/index.js","original":{"line":55,"column":37}},{"name":"ctx","generated":{"line":84,"column":0},"source":"../src/index.js","original":{"line":56,"column":12}},{"name":"ctx","generated":{"line":84,"column":8},"source":"../src/index.js","original":{"line":56,"column":12}},{"generated":{"line":84,"column":11},"source":"../src/index.js","original":{"line":56,"column":15}},{"name":"fillStyle","generated":{"line":84,"column":12},"source":"../src/index.js","original":{"line":56,"column":16}},{"generated":{"line":84,"column":21},"source":"../src/index.js","original":{"line":56,"column":12}},{"name":"bgJson","generated":{"line":84,"column":24},"source":"../src/index.js","original":{"line":56,"column":28}},{"generated":{"line":84,"column":30},"source":"../src/index.js","original":{"line":56,"column":34}},{"name":"value","generated":{"line":84,"column":31},"source":"../src/index.js","original":{"line":56,"column":35}},{"generated":{"line":84,"column":36},"source":"../src/index.js","original":{"line":56,"column":12}},{"name":"ctx","generated":{"line":85,"column":0},"source":"../src/index.js","original":{"line":57,"column":12}},{"name":"ctx","generated":{"line":85,"column":8},"source":"../src/index.js","original":{"line":57,"column":12}},{"generated":{"line":85,"column":11},"source":"../src/index.js","original":{"line":57,"column":15}},{"name":"fillRect","generated":{"line":85,"column":12},"source":"../src/index.js","original":{"line":57,"column":16}},{"generated":{"line":85,"column":20},"source":"../src/index.js","original":{"line":57,"column":12}},{"generated":{"line":85,"column":21},"source":"../src/index.js","original":{"line":57,"column":25}},{"generated":{"line":85,"column":22},"source":"../src/index.js","original":{"line":57,"column":12}},{"generated":{"line":85,"column":24},"source":"../src/index.js","original":{"line":57,"column":28}},{"generated":{"line":85,"column":25},"source":"../src/index.js","original":{"line":57,"column":12}},{"name":"bgJson","generated":{"line":85,"column":27},"source":"../src/index.js","original":{"line":57,"column":31}},{"generated":{"line":85,"column":33},"source":"../src/index.js","original":{"line":57,"column":37}},{"name":"width","generated":{"line":85,"column":34},"source":"../src/index.js","original":{"line":57,"column":38}},{"generated":{"line":85,"column":39},"source":"../src/index.js","original":{"line":57,"column":12}},{"name":"bgJson","generated":{"line":85,"column":41},"source":"../src/index.js","original":{"line":57,"column":45}},{"generated":{"line":85,"column":47},"source":"../src/index.js","original":{"line":57,"column":51}},{"name":"height","generated":{"line":85,"column":48},"source":"../src/index.js","original":{"line":57,"column":52}},{"generated":{"line":85,"column":54},"source":"../src/index.js","original":{"line":57,"column":12}},{"generated":{"line":86,"column":0},"source":"../src/index.js","original":{"line":58,"column":9}},{"generated":{"line":86,"column":7},"source":"../src/index.js","original":{"line":55,"column":8}},{"generated":{"line":86,"column":13},"source":"../src/index.js","original":{"line":58,"column":14}},{"generated":{"line":87,"column":0},"source":"../src/index.js","original":{"line":59,"column":12}},{"name":"bg","generated":{"line":87,"column":12},"source":"../src/index.js","original":{"line":59,"column":16}},{"generated":{"line":87,"column":14},"source":"../src/index.js","original":{"line":59,"column":18}},{"generated":{"line":87,"column":17},"source":"../src/index.js","original":{"line":59,"column":21}},{"name":"ImageItem","generated":{"line":87,"column":21},"source":"../src/index.js","original":{"line":59,"column":25}},{"generated":{"line":87,"column":36},"source":"../src/index.js","original":{"line":59,"column":21}},{"name":"ctx","generated":{"line":87,"column":37},"source":"../src/index.js","original":{"line":59,"column":35}},{"generated":{"line":87,"column":40},"source":"../src/index.js","original":{"line":59,"column":21}},{"name":"bgJson","generated":{"line":87,"column":42},"source":"../src/index.js","original":{"line":59,"column":40}},{"generated":{"line":87,"column":48},"source":"../src/index.js","original":{"line":59,"column":21}},{"generated":{"line":87,"column":49},"source":"../src/index.js","original":{"line":59,"column":12}},{"name":"bg","generated":{"line":88,"column":0},"source":"../src/index.js","original":{"line":60,"column":12}},{"name":"bg","generated":{"line":88,"column":8},"source":"../src/index.js","original":{"line":60,"column":12}},{"generated":{"line":88,"column":10},"source":"../src/index.js","original":{"line":60,"column":14}},{"name":"add","generated":{"line":88,"column":11},"source":"../src/index.js","original":{"line":60,"column":15}},{"generated":{"line":88,"column":14},"source":"../src/index.js","original":{"line":60,"column":12}},{"generated":{"line":89,"column":0},"source":"../src/index.js","original":{"line":61,"column":9}},{"generated":{"line":90,"column":0},"source":"../src/index.js","original":{"line":62,"column":5}},{"name":"ctx","generated":{"line":93,"column":30},"source":"../src/index.js","original":{"line":64,"column":14}},{"name":"itemsData","generated":{"line":93,"column":35},"source":"../src/index.js","original":{"line":64,"column":19}},{"generated":{"line":93,"column":46},"source":"../src/index.js","original":{"line":64,"column":30}},{"generated":{"line":94,"column":0},"source":"../src/index.js","original":{"line":64,"column":30}},{"generated":{"line":96,"column":0},"source":"../src/index.js","original":{"line":65,"column":8}},{"name":"itemsData","generated":{"line":96,"column":10},"source":"../src/index.js","original":{"line":65,"column":12}},{"generated":{"line":96,"column":19},"source":"../src/index.js","original":{"line":65,"column":21}},{"name":"length","generated":{"line":96,"column":20},"source":"../src/index.js","original":{"line":65,"column":22}},{"generated":{"line":96,"column":26},"source":"../src/index.js","original":{"line":65,"column":12}},{"generated":{"line":96,"column":30},"source":"../src/index.js","original":{"line":65,"column":32}},{"generated":{"line":96,"column":31},"source":"../src/index.js","original":{"line":65,"column":12}},{"generated":{"line":96,"column":35},"source":"../src/index.js","original":{"line":65,"column":37}},{"generated":{"line":96,"column":36},"source":"../src/index.js","original":{"line":65,"column":38}},{"name":"items","generated":{"line":96,"column":55},"source":"../src/index.js","original":{"line":65,"column":46}},{"generated":{"line":96,"column":60},"source":"../src/index.js","original":{"line":65,"column":38}},{"generated":{"line":96,"column":61},"source":"../src/index.js","original":{"line":65,"column":8}},{"generated":{"line":96,"column":63},"source":"../src/index.js","original":{"line":65,"column":54}},{"generated":{"line":97,"column":0},"source":"../src/index.js","original":{"line":66,"column":8}},{"name":"TYPES","generated":{"line":97,"column":10},"source":"../src/index.js","original":{"line":66,"column":14}},{"generated":{"line":97,"column":15},"source":"../src/index.js","original":{"line":66,"column":19}},{"generated":{"line":97,"column":18},"source":"../src/index.js","original":{"line":66,"column":22}},{"name":"ImageItem","generated":{"line":97,"column":19},"source":"../src/index.js","original":{"line":66,"column":23}},{"generated":{"line":97,"column":34},"source":"../src/index.js","original":{"line":66,"column":22}},{"name":"TextItem","generated":{"line":97,"column":36},"source":"../src/index.js","original":{"line":66,"column":34}},{"generated":{"line":97,"column":50},"source":"../src/index.js","original":{"line":66,"column":22}},{"name":"TextGroupItem","generated":{"line":97,"column":52},"source":"../src/index.js","original":{"line":66,"column":44}},{"generated":{"line":97,"column":71},"source":"../src/index.js","original":{"line":66,"column":22}},{"generated":{"line":97,"column":72},"source":"../src/index.js","original":{"line":66,"column":8}},{"name":"itemsData","generated":{"line":98,"column":0},"source":"../src/index.js","original":{"line":67,"column":8}},{"name":"itemsData","generated":{"line":98,"column":6},"source":"../src/index.js","original":{"line":67,"column":8}},{"generated":{"line":98,"column":15},"source":"../src/index.js","original":{"line":67,"column":17}},{"name":"forEach","generated":{"line":98,"column":16},"source":"../src/index.js","original":{"line":67,"column":18}},{"generated":{"line":98,"column":23},"source":"../src/index.js","original":{"line":67,"column":8}},{"generated":{"line":98,"column":24},"source":"../src/index.js","original":{"line":67,"column":26}},{"name":"element","generated":{"line":98,"column":34},"source":"../src/index.js","original":{"line":67,"column":26}},{"generated":{"line":98,"column":41},"source":"../src/index.js","original":{"line":67,"column":33}},{"generated":{"line":98,"column":43},"source":"../src/index.js","original":{"line":67,"column":37}},{"name":"TYPES","generated":{"line":99,"column":0},"source":"../src/index.js","original":{"line":68,"column":12}},{"name":"TYPES","generated":{"line":99,"column":8},"source":"../src/index.js","original":{"line":68,"column":12}},{"generated":{"line":99,"column":13},"source":"../src/index.js","original":{"line":68,"column":17}},{"name":"some","generated":{"line":99,"column":14},"source":"../src/index.js","original":{"line":68,"column":18}},{"generated":{"line":99,"column":18},"source":"../src/index.js","original":{"line":68,"column":12}},{"generated":{"line":99,"column":19},"source":"../src/index.js","original":{"line":68,"column":23}},{"name":"i","generated":{"line":99,"column":29},"source":"../src/index.js","original":{"line":68,"column":24}},{"generated":{"line":99,"column":30},"source":"../src/index.js","original":{"line":68,"column":23}},{"generated":{"line":99,"column":32},"source":"../src/index.js","original":{"line":68,"column":31}},{"generated":{"line":100,"column":0},"source":"../src/index.js","original":{"line":69,"column":16}},{"generated":{"line":100,"column":14},"source":"../src/index.js","original":{"line":69,"column":20}},{"generated":{"line":100,"column":20},"source":"../src/index.js","original":{"line":69,"column":24}},{"name":"isItem","generated":{"line":100,"column":21},"source":"../src/index.js","original":{"line":69,"column":25}},{"generated":{"line":100,"column":27},"source":"../src/index.js","original":{"line":69,"column":20}},{"name":"i","generated":{"line":100,"column":28},"source":"../src/index.js","original":{"line":69,"column":32}},{"generated":{"line":100,"column":29},"source":"../src/index.js","original":{"line":69,"column":20}},{"name":"element","generated":{"line":100,"column":31},"source":"../src/index.js","original":{"line":69,"column":35}},{"generated":{"line":100,"column":38},"source":"../src/index.js","original":{"line":69,"column":42}},{"name":"type","generated":{"line":100,"column":39},"source":"../src/index.js","original":{"line":69,"column":43}},{"generated":{"line":100,"column":43},"source":"../src/index.js","original":{"line":69,"column":20}},{"generated":{"line":100,"column":44},"source":"../src/index.js","original":{"line":69,"column":16}},{"generated":{"line":100,"column":46},"source":"../src/index.js","original":{"line":69,"column":50}},{"generated":{"line":101,"column":0},"source":"../src/index.js","original":{"line":70,"column":20}},{"name":"tmpItem","generated":{"line":101,"column":16},"source":"../src/index.js","original":{"line":70,"column":24}},{"generated":{"line":101,"column":23},"source":"../src/index.js","original":{"line":70,"column":31}},{"generated":{"line":101,"column":26},"source":"../src/index.js","original":{"line":70,"column":34}},{"name":"i","generated":{"line":101,"column":30},"source":"../src/index.js","original":{"line":70,"column":38}},{"generated":{"line":101,"column":31},"source":"../src/index.js","original":{"line":70,"column":34}},{"name":"ctx","generated":{"line":101,"column":32},"source":"../src/index.js","original":{"line":70,"column":40}},{"generated":{"line":101,"column":35},"source":"../src/index.js","original":{"line":70,"column":34}},{"name":"element","generated":{"line":101,"column":37},"source":"../src/index.js","original":{"line":70,"column":45}},{"generated":{"line":101,"column":44},"source":"../src/index.js","original":{"line":70,"column":34}},{"generated":{"line":101,"column":45},"source":"../src/index.js","original":{"line":70,"column":20}},{"name":"tmpItem","generated":{"line":102,"column":0},"source":"../src/index.js","original":{"line":71,"column":20}},{"name":"tmpItem","generated":{"line":102,"column":12},"source":"../src/index.js","original":{"line":71,"column":20}},{"generated":{"line":102,"column":19},"source":"../src/index.js","original":{"line":71,"column":27}},{"name":"add","generated":{"line":102,"column":20},"source":"../src/index.js","original":{"line":71,"column":28}},{"generated":{"line":102,"column":23},"source":"../src/index.js","original":{"line":71,"column":20}},{"generated":{"line":103,"column":0},"source":"../src/index.js","original":{"line":72,"column":20}},{"generated":{"line":103,"column":19},"source":"../src/index.js","original":{"line":72,"column":27}},{"generated":{"line":103,"column":23},"source":"../src/index.js","original":{"line":72,"column":20}},{"generated":{"line":104,"column":0},"source":"../src/index.js","original":{"line":73,"column":17}},{"generated":{"line":105,"column":0},"source":"../src/index.js","original":{"line":74,"column":13}},{"generated":{"line":105,"column":9},"source":"../src/index.js","original":{"line":68,"column":12}},{"generated":{"line":106,"column":0},"source":"../src/index.js","original":{"line":75,"column":9}},{"generated":{"line":106,"column":7},"source":"../src/index.js","original":{"line":67,"column":8}},{"generated":{"line":107,"column":0},"source":"../src/index.js","original":{"line":76,"column":5}},{"name":"i","generated":{"line":110,"column":27},"source":"../src/index.js","original":{"line":78,"column":11}},{"name":"type","generated":{"line":110,"column":30},"source":"../src/index.js","original":{"line":78,"column":14}},{"generated":{"line":110,"column":36},"source":"../src/index.js","original":{"line":78,"column":20}},{"generated":{"line":111,"column":0},"source":"../src/index.js","original":{"line":79,"column":8}},{"name":"i","generated":{"line":111,"column":13},"source":"../src/index.js","original":{"line":79,"column":15}},{"generated":{"line":111,"column":14},"source":"../src/index.js","original":{"line":79,"column":16}},{"name":"name","generated":{"line":111,"column":15},"source":"../src/index.js","original":{"line":79,"column":17}},{"generated":{"line":111,"column":19},"source":"../src/index.js","original":{"line":79,"column":15}},{"name":"toLowerCase","generated":{"line":111,"column":20},"source":"../src/index.js","original":{"line":79,"column":22}},{"generated":{"line":111,"column":31},"source":"../src/index.js","original":{"line":79,"column":15}},{"name":"includes","generated":{"line":111,"column":34},"source":"../src/index.js","original":{"line":79,"column":36}},{"generated":{"line":111,"column":42},"source":"../src/index.js","original":{"line":79,"column":15}},{"name":"type","generated":{"line":111,"column":43},"source":"../src/index.js","original":{"line":79,"column":45}},{"generated":{"line":111,"column":47},"source":"../src/index.js","original":{"line":79,"column":15}},{"generated":{"line":111,"column":48},"source":"../src/index.js","original":{"line":79,"column":8}},{"generated":{"line":112,"column":0},"source":"../src/index.js","original":{"line":80,"column":5}},{"name":"width","generated":{"line":115,"column":33},"source":"../src/index.js","original":{"line":82,"column":17}},{"generated":{"line":115,"column":40},"source":"../src/index.js","original":{"line":82,"column":24}},{"generated":{"line":116,"column":0},"source":"../src/index.js","original":{"line":82,"column":24}},{"generated":{"line":118,"column":0},"source":"../src/index.js","original":{"line":83,"column":8}},{"name":"height","generated":{"line":118,"column":10},"source":"../src/index.js","original":{"line":83,"column":12}},{"generated":{"line":118,"column":16},"source":"../src/index.js","original":{"line":83,"column":18}},{"name":"width","generated":{"line":118,"column":19},"source":"../src/index.js","original":{"line":83,"column":21}},{"generated":{"line":118,"column":24},"source":"../src/index.js","original":{"line":83,"column":26}},{"generated":{"line":118,"column":27},"source":"../src/index.js","original":{"line":83,"column":29}},{"name":"ratio","generated":{"line":118,"column":32},"source":"../src/index.js","original":{"line":83,"column":34}},{"generated":{"line":118,"column":37},"source":"../src/index.js","original":{"line":83,"column":8}},{"generated":{"line":120,"column":0},"source":"../src/index.js","original":{"line":82,"column":24}},{"generated":{"line":120,"column":32},"source":"../src/index.js","original":{"line":84,"column":32}},{"name":"createCanvas","generated":{"line":120,"column":37},"source":"../src/index.js","original":{"line":84,"column":37}},{"generated":{"line":120,"column":49},"source":"../src/index.js","original":{"line":84,"column":32}},{"name":"width","generated":{"line":120,"column":50},"source":"../src/index.js","original":{"line":84,"column":50}},{"generated":{"line":120,"column":55},"source":"../src/index.js","original":{"line":84,"column":32}},{"name":"height","generated":{"line":120,"column":57},"source":"../src/index.js","original":{"line":84,"column":57}},{"generated":{"line":120,"column":63},"source":"../src/index.js","original":{"line":84,"column":32}},{"generated":{"line":120,"column":64},"source":"../src/index.js","original":{"line":82,"column":24}},{"generated":{"line":121,"column":0},"source":"../src/index.js","original":{"line":82,"column":24}},{"name":"ctx","generated":{"line":121,"column":10},"source":"../src/index.js","original":{"line":84,"column":16}},{"generated":{"line":121,"column":13},"source":"../src/index.js","original":{"line":82,"column":24}},{"name":"ctx","generated":{"line":121,"column":36},"source":"../src/index.js","original":{"line":84,"column":16}},{"generated":{"line":121,"column":39},"source":"../src/index.js","original":{"line":82,"column":24}},{"generated":{"line":122,"column":0},"source":"../src/index.js","original":{"line":82,"column":24}},{"name":"canvas","generated":{"line":122,"column":10},"source":"../src/index.js","original":{"line":84,"column":21}},{"generated":{"line":122,"column":16},"source":"../src/index.js","original":{"line":82,"column":24}},{"name":"canvas","generated":{"line":122,"column":39},"source":"../src/index.js","original":{"line":84,"column":21}},{"generated":{"line":122,"column":45},"source":"../src/index.js","original":{"line":82,"column":24}},{"generated":{"line":124,"column":0},"source":"../src/index.js","original":{"line":85,"column":8}},{"generated":{"line":124,"column":13},"source":"../src/index.js","original":{"line":85,"column":15}},{"name":"Promise","generated":{"line":124,"column":17},"source":"../src/index.js","original":{"line":85,"column":19}},{"generated":{"line":124,"column":24},"source":"../src/index.js","original":{"line":85,"column":15}},{"generated":{"line":124,"column":25},"source":"../src/index.js","original":{"line":85,"column":27}},{"name":"resolve","generated":{"line":124,"column":35},"source":"../src/index.js","original":{"line":85,"column":28}},{"generated":{"line":124,"column":42},"source":"../src/index.js","original":{"line":85,"column":27}},{"generated":{"line":124,"column":44},"source":"../src/index.js","original":{"line":85,"column":40}},{"name":"setInterval","generated":{"line":125,"column":0},"source":"../src/index.js","original":{"line":86,"column":12}},{"name":"setInterval","generated":{"line":125,"column":8},"source":"../src/index.js","original":{"line":86,"column":12}},{"generated":{"line":125,"column":19},"source":"../src/index.js","original":{"line":86,"column":23}},{"generated":{"line":125,"column":20},"source":"../src/index.js","original":{"line":86,"column":24}},{"generated":{"line":125,"column":32},"source":"../src/index.js","original":{"line":86,"column":30}},{"generated":{"line":126,"column":0},"source":"../src/index.js","original":{"line":87,"column":16}},{"generated":{"line":126,"column":14},"source":"../src/index.js","original":{"line":87,"column":20}},{"generated":{"line":126,"column":15},"source":"../src/index.js","original":{"line":87,"column":21}},{"generated":{"line":126,"column":21},"source":"../src/index.js","original":{"line":87,"column":25}},{"name":"image","generated":{"line":126,"column":22},"source":"../src/index.js","original":{"line":87,"column":26}},{"generated":{"line":126,"column":27},"source":"../src/index.js","original":{"line":87,"column":16}},{"generated":{"line":126,"column":29},"source":"../src/index.js","original":{"line":87,"column":33}},{"name":"ctx","generated":{"line":127,"column":0},"source":"../src/index.js","original":{"line":88,"column":20}},{"name":"ctx","generated":{"line":127,"column":12},"source":"../src/index.js","original":{"line":88,"column":20}},{"generated":{"line":127,"column":15},"source":"../src/index.js","original":{"line":88,"column":23}},{"name":"drawImage","generated":{"line":127,"column":16},"source":"../src/index.js","original":{"line":88,"column":24}},{"generated":{"line":127,"column":25},"source":"../src/index.js","original":{"line":88,"column":20}},{"generated":{"line":127,"column":26},"source":"../src/index.js","original":{"line":88,"column":34}},{"generated":{"line":127,"column":32},"source":"../src/index.js","original":{"line":88,"column":38}},{"name":"canvas","generated":{"line":127,"column":33},"source":"../src/index.js","original":{"line":88,"column":39}},{"generated":{"line":127,"column":39},"source":"../src/index.js","original":{"line":88,"column":20}},{"generated":{"line":127,"column":41},"source":"../src/index.js","original":{"line":88,"column":47}},{"generated":{"line":127,"column":42},"source":"../src/index.js","original":{"line":88,"column":20}},{"generated":{"line":127,"column":44},"source":"../src/index.js","original":{"line":88,"column":50}},{"generated":{"line":127,"column":45},"source":"../src/index.js","original":{"line":88,"column":20}},{"name":"width","generated":{"line":127,"column":47},"source":"../src/index.js","original":{"line":88,"column":53}},{"generated":{"line":127,"column":52},"source":"../src/index.js","original":{"line":88,"column":20}},{"name":"height","generated":{"line":127,"column":54},"source":"../src/index.js","original":{"line":88,"column":60}},{"generated":{"line":127,"column":60},"source":"../src/index.js","original":{"line":88,"column":20}},{"generated":{"line":128,"column":0},"source":"../src/index.js","original":{"line":89,"column":20}},{"name":"image","generated":{"line":128,"column":16},"source":"../src/index.js","original":{"line":89,"column":26}},{"generated":{"line":128,"column":21},"source":"../src/index.js","original":{"line":89,"column":31}},{"name":"canvas","generated":{"line":128,"column":24},"source":"../src/index.js","original":{"line":89,"column":34}},{"generated":{"line":128,"column":30},"source":"../src/index.js","original":{"line":89,"column":40}},{"name":"toDataURL","generated":{"line":128,"column":31},"source":"../src/index.js","original":{"line":89,"column":41}},{"generated":{"line":128,"column":40},"source":"../src/index.js","original":{"line":89,"column":34}},{"generated":{"line":128,"column":42},"source":"../src/index.js","original":{"line":89,"column":20}},{"name":"resolve","generated":{"line":129,"column":0},"source":"../src/index.js","original":{"line":90,"column":20}},{"name":"resolve","generated":{"line":129,"column":12},"source":"../src/index.js","original":{"line":90,"column":20}},{"generated":{"line":129,"column":19},"source":"../src/index.js","original":{"line":90,"column":27}},{"name":"image","generated":{"line":129,"column":20},"source":"../src/index.js","original":{"line":90,"column":28}},{"generated":{"line":129,"column":25},"source":"../src/index.js","original":{"line":90,"column":27}},{"generated":{"line":129,"column":26},"source":"../src/index.js","original":{"line":90,"column":20}},{"generated":{"line":130,"column":0},"source":"../src/index.js","original":{"line":91,"column":17}},{"generated":{"line":131,"column":0},"source":"../src/index.js","original":{"line":92,"column":13}},{"generated":{"line":131,"column":9},"source":"../src/index.js","original":{"line":86,"column":23}},{"generated":{"line":131,"column":11},"source":"../src/index.js","original":{"line":92,"column":15}},{"generated":{"line":131,"column":13},"source":"../src/index.js","original":{"line":86,"column":23}},{"generated":{"line":131,"column":14},"source":"../src/index.js","original":{"line":86,"column":12}},{"generated":{"line":132,"column":0},"source":"../src/index.js","original":{"line":93,"column":9}},{"generated":{"line":132,"column":7},"source":"../src/index.js","original":{"line":85,"column":15}},{"generated":{"line":132,"column":8},"source":"../src/index.js","original":{"line":85,"column":8}},{"generated":{"line":133,"column":0},"source":"../src/index.js","original":{"line":95,"column":5}},{"name":"Frigg","generated":{"line":138,"column":15},"source":"../src/index.js","original":{"line":97,"column":15}}],"sources":{"../src/index.js":"import { isArray, downloadFile } from './tool.js'\nimport { ImageItem, TextItem, TextGroupItem } from './item.js'\nimport Quene from './queue.js'\n\n//为了保证图片绘制的顺序，使用绘制队列\n\nclass Frigg {\n\n    constructor(data) {\n        this.ratio = data.width / data.height\n        this.bgJson = data.background\n        const {ctx, canvas} = this.createCanvas(data.width, data.height)\n        this.canvas = canvas\n        this.ctx = ctx\n        this.itemsJson = data.items\n        this.image = ''        \n    }\n\n    draw(ctx) {\n        this.drawBackground(ctx, this.bgJson)\n        this.drawItems(ctx, this.itemsJson)\n\n    }\n\n    createCanvas(width, height) {\n        const canvas = document.createElement('canvas')\n        canvas.crossorigin = 'anonymous'\n        // document.body.append(canvas)\n        canvas.width = width\n        canvas.height = height\n        const ctx = canvas.getContext('2d')\n        return {\n            canvas,\n            ctx \n        }\n    }\n\n\n    getImage() {\n        return new Promise ((resolve, reject) => {\n            this.draw(this.ctx)\n            Quene.push(() => {\n                let image = this.canvas.toDataURL()\n                if (!image) {\n                    reject('无法生成image')\n                }\n                resolve(image)\n            // downloadFile(image, 'template.jpg')\n            })\n            Quene.next()\n        })\n    }\n\n    drawBackground(ctx, bgJson) {\n        if (bgJson.type === 'color') {\n            ctx.fillStyle = bgJson.value\n            ctx.fillRect(0, 0, bgJson.width, bgJson.height);\n        } else{\n            let bg = new ImageItem(ctx, bgJson)\n            bg.add()\n        }\n    }\n\n    drawItems(ctx, itemsData) {\n        if (itemsData.length <= 0 && !isArray(items)) return\n        const TYPES = [ImageItem, TextItem, TextGroupItem]\n        itemsData.forEach(element => {\n            TYPES.some((i) =>  {\n                if (this.isItem(i, element.type)) {\n                    let tmpItem = new i(ctx, element)\n                    tmpItem.add()\n                    return true\n                }\n            })\n        }); \n    }\n\n    isItem(i, type) {\n        return i.name.toLowerCase().includes(type)\n    }\n\n    getThumbnail(width) {\n        let height = width / this.ratio\n        const { ctx, canvas } = this.createCanvas(width, height)\n        return new Promise((resolve) => {\n            setInterval(() => {\n                if (!this.image) {\n                    ctx.drawImage(this.canvas, 0, 0, width, height)\n                    const image = canvas.toDataURL()\n                    resolve(image)\n                }\n            }, 10);\n        })\n       \n    }\n}\nexport default Frigg\n\n\n\n\n"},"lineCount":null}},"hash":"f313e64f3ac9675bb5efad50724ce79f","cacheData":{"env":{}}}